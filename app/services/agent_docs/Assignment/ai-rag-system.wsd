@startuml ai_rag_system
' Grade 6 math content acquisition
skinparam componentStyle rectangle
skinparam shadowing false
skinparam ArrowColor #444444
skinparam component {
  FontSize 12
}

actor "Curriculum Analyst" as Analyst

rectangle "Structured Data Pipeline" {
  component "Data Model Registry" as DataModel
  database "PostgreSQL\n(DB + ORM Models)" as DB
  component "Structured Data Extractor" as StructuredExtractor
}

rectangle "Document Digitization Pipeline" {
  component "Grade 6 Math PDF" as PDF
  component "OCR Service\n(Tesseract/Azure Vision)" as OCR
  component "Layout & Entity Parser" as Parser
  component "Content Normalizer" as Normalizer
}

component "Knowledge Harmonizer" as Harmonizer
storage "Knowledge Store\n(Vector DB + Metadata)" as Store

Analyst --> StructuredExtractor : Configure queries
StructuredExtractor --> DataModel : Discover schemas
StructuredExtractor --> DB : Retrieve tables/relations
StructuredExtractor --> Harmonizer : Publish curated datasets

Analyst --> PDF : Upload / select textbook
PDF --> OCR : Page images
OCR --> Parser : Detected text blocks
Parser --> Normalizer : Clean math expressions
Normalizer --> Harmonizer : Semi/unstructured payloads

Harmonizer --> Store : Merge + version content
Store --> Analyst : Serve for downstream RAG tasks
@enduml
